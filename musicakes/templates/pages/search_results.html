{% extends 'layouts/layout.html' %}
{% block title %}Musicakes | Search Results{% endblock %}
{% block content %}




<div class="album py-5">
  <meta id="page" data-page="{{ request.args.get('page')|int }}">

  <div class="container">
    <h1 class="my-4">Search Results</h1>
  </div>

  <div class="container">
    <h3 class="mb-4">Artists</h3>

    <div class="row">

      {% if artists_results %}

      {% for artist in artists_results %}
          <div class="col-md-auto col-xs-12">
            <div class="card mb-4 shadow-sm">
              <div class="bd-placeholder-img card-img-top mx-auto d-block p-2">
            <a href="/artists/{{ artist.id }}">
                {% if artist.artist_picture is none %}
                  <img class="img-fluid" id="preview" src="{{ url_for('static', filename='img/musicakes.png') }}" />
                {% else %}
                  <img class="img-fluid rounded" src="{{ artist.artist_picture }}" onerror="this.onerror=null; this.src='{{ url_for('static', filename='img/musicakes.png') }}'" />
                {% endif %}
            </a>
        </div>
              <div class="card-body">
                <p class="card-text">
                  <div class="font-weight-bold">{{ artist.name }}</div>
                  <div>
                    <small class="text-muted">{{ artist.country }}</small>
                  </div>
                </p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <a type="button" class="btn btn-sm btn-outline-secondary" href="/artists/{{ artist.id }}">View</a>
                  </div>

                </div>
              </div>
            </div>
          </div>
          {% endfor %}
      {% else %}
      <div class="col-md-auto col-xs-12">
        <p>No artists found.</p>
      </div>
      {% endif %}

    </div>
  </div>

  <div class="container">
    <h3 class="mb-4">Releases</h3>

    <div class="row">

      {% if releases_results %}

      {% for release in releases_results %}
        <div class="col-md-auto col-xs-12">
            <div class="card mb-4 shadow-sm">
              <div class="bd-placeholder-img card-img-top mx-auto d-block p-2">
            <a href="/releases/{{ release.id }}">
                {% if release.cover_art is none %}
                  <img class="img-fluid" id="preview" src="{{ url_for('static', filename='img/musicakes.png') }}" />
                {% else %}
                  <img class="img-fluid rounded" src="{{ release.cover_art }}" onerror="this.onerror=null; this.src='{{ url_for('static', filename='img/musicakes.png') }}'" />
                {% endif %}
            </a>
        </div>
              <div class="card-body">
                <p class="card-text">
                  <div class="font-weight-bold">{{ release.release_name }}</div>
                  <div>{{ release.artist_name }}</div>
                  <div>
                    <small class="text-muted">{{ release.created_on.strftime('%B %Y') }}</small>
                  </div>
                </p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <a type="button" class="btn btn-sm btn-outline-secondary" href="/releases/{{ release.id }}">View</a>
                  </div>

                </div>
              </div>
            </div>
          </div>
          {% endfor %}
      {% else %}
      <div class="col-md-auto col-xs-12">
        <p>No releases found.</p>
      </div>
      {% endif %}

    </div>
  </div>

  <div class="container">
    <h3 class="mb-4">Tracks</h3>

    <div class="row">

      {% if tracks_results %}

      {% for track in tracks_results %}
          <div class="col-md-auto col-xs-12">
            <div class="card mb-4 shadow-sm">
              <div class="bd-placeholder-img card-img-top mx-auto d-block p-2">
            <a href="/tracks/{{ track.id }}">
                {% if track.release_cover_art is none %}
                  <img class="img-fluid" id="preview" src="{{ url_for('static', filename='img/musicakes.png') }}" />
                {% else %}
                  <img class="img-fluid rounded" src="{{ track.release_cover_art }}" onerror="this.onerror=null; this.src='{{ url_for('static', filename='img/musicakes.png') }}'" />
                {% endif %}
            </a>
        </div>
              <div class="card-body">
                <p class="card-text">
                  <div class="font-weight-bold">{{ track.release_name }}</div>
                  <div>{{ track.artist_name }}</div>
                  <div>
                    <small class="text-muted">{{ track.created_on.strftime('%B %Y') }}</small>
                  </div>
                </p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <a type="button" class="btn btn-sm btn-outline-secondary" href="/tracks/{{ track.id }}">View</a>
                  </div>

                </div>
              </div>
            </div>
          </div>
          {% endfor %}
      {% else %}
      <div class="col-md-auto col-xs-12">
        <p>No tracks found.</p>
      </div>
      {% endif %}

    </div>
  </div>

  <div class="container">
    <h3 class="mb-4">Users</h3>

    <div class="row">

      {% if users_results %}

      {% for user in users_results %}
          <div class="col-md-auto col-xs-12">
            <div class="card mb-4 shadow-sm">
              <div class="bd-placeholder-img card-img-top mx-auto d-block p-2">
                <a href="/users/{{ user.id }}">
                    {% if user.profile_picture is none %}
                      <img class="img-fluid" id="preview" src="{{ url_for('static', filename='img/musicakes.png') }}" />
                    {% else %}
                      <img class="img-fluid rounded" src="{{ user.profile_picture }}" onerror="this.onerror=null; this.src='{{ url_for('static', filename='img/musicakes.png') }}'" />
                    {% endif %}
                </a>
              </div>
              <div class="card-body">
                <p class="card-text">
                  <div class="font-weight-bold">{{ user.username }}</div>
                </p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <a type="button" class="btn btn-sm btn-outline-secondary" href="/users/{{ user.id }}">View</a>
                  </div>

                </div>
              </div>
            </div>
          </div>
          {% endfor %}
      {% else %}
      <div class="col-md-auto col-xs-12">
        <p>No users found.</p>
      </div>
      {% endif %}

    </div>
  </div>

</div>

<script type="text/javascript" src="{{ url_for('static', filename='js/libs/jquery-3.5.1.min.js') }}"></script>
<script type="text/javascript">
  window.appConfig = {
    page: $('#page').data(),
  }
</script>
<script type="text/javascript" src="{{ url_for('static', filename='js/show_releases.js') }}"></script>

{% endblock %}
