{% extends "layouts/layout.html" %}

{% block content %}

<div class = "container">

	<div class="row pt-4 mt-4">
		<div class="col-md-2 border-right">

			<h4>
				Username
			</h4>

			<p>{{ userinfo.username }}</p>

			<h4>
				Profile Picture
			</h4>

			<div class = "display-picture my-4">
			{% if userinfo.profile_picture is none %}
				<img id="preview" src="/static/img/musicakes.png" />
			{% else %}
				<img src="{{ userinfo.profile_picture }}" />
			{% endif %}
			</div>

			<small>
				Member since {{ userinfo.created_on }}
			</small>

		</div>

		<div class="col-md-10">
			<h4>Purchases </h4>
			{% if user.purchases is defined %}

			<div class="row">

				{% for purchase in user.purchases %}
					<div class="col-md-auto col-xs-12">
		      	<div class="card mb-4 shadow-sm">
		        	<div class="bd-placeholder-img card-img-top mx-auto d-block p-2">
				    		<a class="img-fluid" href="#" disabled>
					      {% if purchase.release_cover_art is none %}
					      	<img class="img-fluid" id="preview" src="{{ url_for('static', filename='img/musicakes.png') }}" />
					      {% else %}
					      	<img class="img-fluid rounded" src="{{ purchase.release_cover_art }}" onerror="this.onerror=null; this.src='{{ url_for('static', filename='img/musicakes.png') }}'" />
					      {% endif %}
					    	</a>
							</div>
		          <div class="card-body">
		          	<p class="card-text">
		            <div class="font-weight-bold">{{ purchase.artist_name }}</div>
		            <div class="card-text">{{ purchase.type_name }}</div>
		            </p>

		              <div class="d-flex justify-content-between align-items-center">
		                <div class="btn-group">



												{% if purchase.type == 'release' %}

													{% if not purchase.release_is_removed %}
		                  	<a type="button" class="btn btn-sm btn-outline-secondary" href="/releases/{{ purchase.type_id }}">View</a>
													{% endif %}

												<a type="button" id="{{ purchase.type_id }}" class="btn btn-sm btn-outline-secondary download-release-btn">Download</a>

												{% elif purchase.type == 'track' %}
													{% if not purchase.release_is_removed %}
												<a type="button" class="btn btn-sm btn-outline-secondary" href="/tracks/{{ purchase.type_id }}">View</a>
													{% endif %}
												<a type="button" id="{{ purchase.type_id }}" class="btn btn-sm btn-outline-secondary download-track-btn">Download</a>

												{% endif %}

		                </div>
		              </div>
		            </div>
		          </div>
		        </div>

				{% endfor %}

		{% else %}

			<h4>You have not purchased any music yet.</h4>

		{% endif %}
		</div>
	</div>

</div>


{% endblock %}
