{% extends "layouts/layout.html" %}

{% block content %}

<div class = "container">

	<div class="row pt-4 mt-4">
		<div class="col-md-2 border-right">

			<h4>
				Username
			</h4>

			<p>{{ user.username }}</p>

			<h4>
				Profile Picture
			</h4>

			<div class = "display-picture my-4">
			{% if user.profile_picture is none %}
				<img id="preview" src="/static/img/musicakes.png" />
			{% else %}
				<img src="{{ user.profile_picture }}" />
			{% endif %}
			</div>

			<small>
				Member since {{ user.created_on }}
			</small>

		</div>

		<div class="col-md-10">
			<h4>Purchases </h4>
			{% if user.purchases is defined and user.purchases|length > 0 %}

			<div class="row">

				{% for purchase in user.purchases %}
					{% if not purchase.release_is_removed %}
					<div class="col-md-auto col-xs-12">
		      	<div class="card mb-4 shadow-sm">
		        	<div class="bd-placeholder-img card-img-top mx-auto d-block p-2">
				    		<a class="img-fluid" href="#" disabled>
					      {% if purchase.release_cover_art is none %}
					      	<img class="img-fluid" id="preview" src="{{ url_for('static', filename='img/musicakes.png') }}" />
					      {% else %}
					      	<img class="img-fluid rounded" src="{{ purchase.release_cover_art }}" onerror="this.onerror=null; this.src='{{ url_for('static', filename='img/musicakes.png') }}'" />
					      {% endif %}
					    	</a>
							</div>
		          <div class="card-body">
		          	<p class="card-text">
		            <div class="font-weight-bold">{{ purchase.artist_name }}</div>
		            <div class="card-text">{{ purchase.type_name }}</div>
		            </p>

		              <div class="d-flex justify-content-between align-items-center">
		                <div class="btn-group">
												{% if purchase.type == 'release' %}
		                  	<a type="button" class="btn btn-sm btn-outline-secondary" href="/releases/{{ purchase.type_id }}">View</a>

												{% elif purchase.type == 'track' %}
												<a type="button" class="btn btn-sm btn-outline-secondary" href="/tracks/{{ purchase.type_id }}">View</a>
												{% endif %}
		                </div>
		              </div>
		            </div>
		          </div>
		        </div>
					{% endif %}
				{% endfor %}

		{% else %}

			<p>{{ user.username }} has not purchased any music yet.</p>

		{% endif %}
		</div>
	</div>

</div>


{% endblock %}
